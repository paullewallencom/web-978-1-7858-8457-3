!function e(b,g,d){function f(k,h){if(!g[k]){if(!b[k]){var j="function"==typeof require&&require;if(!h&&j){return j(k,!0)}if(c){return c(k,!0)}throw new Error("Cannot find module '"+k+"'")}var l=g[k]={exports:{}};b[k][0].call(l.exports,function(i){var m=b[k][1][i];return f(m?m:i)},l,l.exports,e,b,g,d)}return g[k].exports}for(var c="function"==typeof require&&require,a=0;a<d.length;a++){f(d[a])}return f}({1:[function(d,a,g){function c(h){return function(i,j){return i&&"unknown_error"===i.name&&(i.message=(i.message||"")+" Unknown error!  Did you remember to enable CORS?"),h(i,j)}}function f(i){this.status=400,this.name="authentication_error",this.message=i,this.error=!0;try{Error.captureStackTrace(this,f)}catch(h){}}var b=d("./utils");g.signup=b.toPromise(function(q,x,j,m){var v=this;if("undefined"==typeof m&&(m="undefined"==typeof j?"undefined"==typeof x?q:x:j,j={}),-1===["http","https"].indexOf(v.type())){return m(new f('This plugin only works for the http/https adapter. So you should use new PouchDB("http://mysite.com:5984/mydb") instead.'))}if(!q){return m(new f("You must provide a username"))}if(!x){return m(new f("You must provide a password"))}var w="org.couchdb.user:"+q,s={name:q,password:x,roles:j.roles||[],type:"user",_id:w},o=["name","password","roles","type"];if(j.metadata){for(var k in j.metadata){if(j.hasOwnProperty(k)&&(-1!==o.indexOf(k)||k.startsWith("_"))){return m(new f('cannot use reserved word in metadata: "'+k+'"'))}}s=b.extend(!0,s,j.metadata)}var r=b.getUsersUrl(v)+"/"+encodeURIComponent(w),h=b.extend(!0,{method:"PUT",url:r,body:s},j.ajax||{});b.ajax(h,c(m))}),g.signUp=g.signup,g.login=b.toPromise(function(m,l,o,k){var h=this;if("undefined"==typeof k&&(k=o,o={}),-1===["http","https"].indexOf(h.type())){return k(new f("this plugin only works for the http/https adapter"))}if(!m){return k(new f("you must provide a username"))}if(!l){return k(new f("you must provide a password"))}var j=b.extend(!0,{method:"POST",url:b.getSessionUrl(h),body:{name:m,password:l}},o.ajax||{});b.ajax(j,c(k))}),g.logIn=g.login,g.logout=b.toPromise(function(i,h){var k=this;"undefined"==typeof h&&(h=i,i={});var j=b.extend(!0,{method:"DELETE",url:b.getSessionUrl(k)},i.ajax||{});b.ajax(j,c(h))}),g.logOut=g.logout,g.getSession=b.toPromise(function(k,j){var m=this;"undefined"==typeof j&&(j=k,k={});var l=b.getSessionUrl(m),h=b.extend(!0,{method:"GET",url:l},k.ajax||{});b.ajax(h,c(j))}),g.getUser=b.toPromise(function(m,l,o){var k=this;if("undefined"==typeof o&&(o="undefined"==typeof l?m:l,l={}),!m){return o(new f("you must provide a username"))}var h=b.getUsersUrl(k),j=b.extend(!0,{method:"GET",url:h+"/"+encodeURIComponent("org.couchdb.user:"+m)},l.ajax||{});b.ajax(j,c(o))}),g.changePassword=b.toPromise(function(l,k,m,j){var h=this;return"undefined"==typeof j&&(j="undefined"==typeof m?"undefined"==typeof k?l:k:m,m={}),-1===["http","https"].indexOf(h.type())?j(new f('This plugin only works for the http/https adapter. So you should use new PouchDB("http://mysite.com:5984/mydb") instead.')):l?k?h.getUser(l,m,function(n,p){if(n){return j(n)}p.password=k;var i=b.getUsersUrl(h)+"/"+encodeURIComponent(p._id),q=b.extend(!0,{method:"PUT",url:i,body:p},m.ajax||{});b.ajax(q,c(j))}):j(new f("You must provide a password")):j(new f("You must provide a username"))}),b.inherits(f,Error),"undefined"!=typeof window&&window.PouchDB&&window.PouchDB.plugin(g)},{"./utils":2}],2:[function(b,a,c){(function(d){function f(h){return h.getUrl().replace(/\/[^\/]+\/?$/,"")}var g=b("pouchdb/extras/promise");c.getUsersUrl=function(h){return f(h)+"/_users"},c.getSessionUrl=function(h){return f(h)+"/_session"},c.once=function(i){var h=!1;return c.getArguments(function(j){if(h){throw console.trace(),new Error("once called  more than once")}h=!0,i.apply(this,j)})},c.getArguments=function(h){return function(){for(var i=arguments.length,k=new Array(i),j=-1;++j<i;){k[j]=arguments[j]}return h.call(this,k)}},c.toPromise=function(h){return c.getArguments(function(n){var m,l=this,j="function"==typeof n[n.length-1]?n.pop():!1;j&&(m=function(i,o){d.nextTick(function(){j(i,o)})});var k=new g(function(p,r){try{var q=c.once(function(o,s){o?r(o):p(s)});n.push(q),h.apply(l,n)}catch(i){r(i)}});return m&&k.then(function(i){m(null,i)},m),k.cancel=function(){return this},k})},c.inherits=b("inherits"),c.extend=b("pouchdb-extend"),c.ajax=b("pouchdb/extras/ajax"),c.clone=function(h){return c.extend(!0,{},h)},c.uuid=b("./uuid"),c.Promise=g}).call(this,b("/Users/nlawson/workspace-node/pouchdb-authentication/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"))},{"./uuid":3,"/Users/nlawson/workspace-node/pouchdb-authentication/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":6,inherits:7,"pouchdb-extend":26,"pouchdb/extras/ajax":27,"pouchdb/extras/promise":28}],3:[function(d,a,g){function c(h){return 0|Math.random()*h}function f(i,h){h=h||b.length;var k="",j=-1;if(i){for(;++j<i;){k+=b[c(h)]}return k}for(;++j<36;){switch(j){case 8:case 13:case 18:case 23:k+="-";break;case 19:k+=b[3&c(16)|8];break;default:k+=b[c(16)]}}return k}var b="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");a.exports=f},{}],4:[function(b,a,c){},{}],5:[function(h,d,k){function g(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function j(a){return"function"==typeof a}function f(a){return"number"==typeof a}function c(a){return"object"==typeof a&&null!==a}function b(a){return void 0===a}d.exports=g,g.EventEmitter=g,g.prototype._events=void 0,g.prototype._maxListeners=void 0,g.defaultMaxListeners=10,g.prototype.setMaxListeners=function(a){if(!f(a)||0>a||isNaN(a)){throw TypeError("n must be a positive number")}return this._maxListeners=a,this},g.prototype.emit=function(o){var i,q,m,l,a,p;if(this._events||(this._events={}),"error"===o&&(!this._events.error||c(this._events.error)&&!this._events.error.length)){if(i=arguments[1],i instanceof Error){throw i}throw TypeError('Uncaught, unspecified "error" event.')}if(q=this._events[o],b(q)){return !1}if(j(q)){switch(arguments.length){case 1:q.call(this);break;case 2:q.call(this,arguments[1]);break;case 3:q.call(this,arguments[1],arguments[2]);break;default:for(m=arguments.length,l=new Array(m-1),a=1;m>a;a++){l[a-1]=arguments[a]}q.apply(this,l)}}else{if(c(q)){for(m=arguments.length,l=new Array(m-1),a=1;m>a;a++){l[a-1]=arguments[a]}for(p=q.slice(),m=p.length,a=0;m>a;a++){p[a].apply(this,l)}}}return !0},g.prototype.addListener=function(i,a){var l;if(!j(a)){throw TypeError("listener must be a function")}if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",i,j(a.listener)?a.listener:a),this._events[i]?c(this._events[i])?this._events[i].push(a):this._events[i]=[this._events[i],a]:this._events[i]=a,c(this._events[i])&&!this._events[i].warned){var l;l=b(this._maxListeners)?g.defaultMaxListeners:this._maxListeners,l&&l>0&&this._events[i].length>l&&(this._events[i].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[i].length),"function"==typeof console.trace&&console.trace())}return this},g.prototype.on=g.prototype.addListener,g.prototype.once=function(l,a){function m(){this.removeListener(l,m),i||(i=!0,a.apply(this,arguments))}if(!j(a)){throw TypeError("listener must be a function")}var i=!1;return m.listener=a,this.on(l,m),this},g.prototype.removeListener=function(p,l){var q,o,m,i;if(!j(l)){throw TypeError("listener must be a function")}if(!this._events||!this._events[p]){return this}if(q=this._events[p],m=q.length,o=-1,q===l||j(q.listener)&&q.listener===l){delete this._events[p],this._events.removeListener&&this.emit("removeListener",p,l)}else{if(c(q)){for(i=m;i-->0;){if(q[i]===l||q[i].listener&&q[i].listener===l){o=i;break}}if(0>o){return this}1===q.length?(q.length=0,delete this._events[p]):q.splice(o,1),this._events.removeListener&&this.emit("removeListener",p,l)}}return this},g.prototype.removeAllListeners=function(i){var a,l;if(!this._events){return this}if(!this._events.removeListener){return 0===arguments.length?this._events={}:this._events[i]&&delete this._events[i],this}if(0===arguments.length){for(a in this._events){"removeListener"!==a&&this.removeAllListeners(a)}return this.removeAllListeners("removeListener"),this._events={},this}if(l=this._events[i],j(l)){this.removeListener(i,l)}else{for(;l.length;){this.removeListener(i,l[l.length-1])}}return delete this._events[i],this},g.prototype.listeners=function(i){var a;return a=this._events&&this._events[i]?j(this._events[i])?[this._events[i]]:this._events[i].slice():[]},g.listenerCount=function(i,a){var l;return l=i._events&&i._events[a]?j(i._events[a])?1:i._events[a].length:0}},{}],6:[function(c,a,f){function b(){}var d=a.exports={};d.nextTick=function(){var h="undefined"!=typeof window&&window.setImmediate,g="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(h){return function(j){return window.setImmediate(j)}}if(g){var i=[];return window.addEventListener("message",function(l){var j=l.source;if((j===window||null===j)&&"process-tick"===l.data&&(l.stopPropagation(),i.length>0)){var k=i.shift();k()}},!0),function(j){i.push(j),window.postMessage("process-tick","*")}}return function(j){setTimeout(j,0)}}(),d.title="browser",d.browser=!0,d.env={},d.argv=[],d.on=b,d.once=b,d.off=b,d.emit=b,d.binding=function(g){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(g){throw new Error("process.chdir is not supported")}},{}],7:[function(b,a,c){"function"==typeof Object.create?a.exports=function(f,d){f.super_=d,f.prototype=Object.create(d.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}})}:a.exports=function(f,d){f.super_=d;var g=function(){};g.prototype=d.prototype,f.prototype=new g,f.prototype.constructor=f}},{}],8:[function(c,a,d){function b(){}a.exports=b},{}],9:[function(g,k,d){function b(p){function i(r,n){function v(t){s[n]=t,++o===u&!m&&(m=!0,j.resolve(q,s))}f(r).then(v,function(t){m||(m=!0,j.reject(q,t))})}if("[object Array]"!==Object.prototype.toString.call(p)){return l(new TypeError("must be an array"))}var u=p.length,m=!1;if(!u){return f([])}for(var s=new Array(u),o=0,a=-1,q=new c(h);++a<u;){i(p[a],a)}return q}var c=g("./promise"),l=g("./reject"),f=g("./resolve"),h=g("./INTERNAL"),j=g("./handlers");k.exports=b},{"./INTERNAL":8,"./handlers":10,"./promise":12,"./reject":15,"./resolve":16}],10:[function(f,b,h){function d(j){var i=j&&j.then;return j&&"object"==typeof j&&"function"==typeof i?function(){i.apply(j,arguments)}:void 0}var g=f("./tryCatch"),c=f("./resolveThenable"),a=f("./states");h.resolve=function(m,k){var i=g(d,k);if("error"===i.status){return h.reject(m,i.value)}var j=i.value;if(j){c.safely(m,j)}else{m.state=a.FULFILLED,m.outcome=k;for(var n=-1,l=m.queue.length;++n<l;){m.queue[n].callFulfilled(k)}}return m},h.reject=function(k,i){k.state=a.REJECTED,k.outcome=i;for(var l=-1,j=k.queue.length;++l<j;){k.queue[l].callRejected(i)}return k}},{"./resolveThenable":17,"./states":18,"./tryCatch":19}],11:[function(b,a,c){a.exports=c=b("./promise"),c.resolve=b("./resolve"),c.reject=b("./reject"),c.all=b("./all"),c.race=b("./race")},{"./all":9,"./promise":12,"./race":14,"./reject":15,"./resolve":16}],12:[function(g,k,d){function b(a){if(!(this instanceof b)){return new b(a)}if("function"!=typeof a){throw new TypeError("resolver must be a function")}this.state=h.PENDING,this.queue=[],this.outcome=void 0,a!==l&&f.safely(this,a)}var c=g("./unwrap"),l=g("./INTERNAL"),f=g("./resolveThenable"),h=g("./states"),j=g("./queueItem");k.exports=b,b.prototype["catch"]=function(a){return this.then(null,a)},b.prototype.then=function(o,m){if("function"!=typeof o&&this.state===h.FULFILLED||"function"!=typeof m&&this.state===h.REJECTED){return this}var p=new b(l);if(this.state!==h.PENDING){var a=this.state===h.FULFILLED?o:m;c(p,a,this.outcome)}else{this.queue.push(new j(p,o,m))}return p}},{"./INTERNAL":8,"./queueItem":13,"./resolveThenable":17,"./states":18,"./unwrap":20}],13:[function(d,a,g){function c(i,h,j){this.promise=i,"function"==typeof h&&(this.onFulfilled=h,this.callFulfilled=this.otherCallFulfilled),"function"==typeof j&&(this.onRejected=j,this.callRejected=this.otherCallRejected)}var f=d("./handlers"),b=d("./unwrap");a.exports=c,c.prototype.callFulfilled=function(h){f.resolve(this.promise,h)},c.prototype.otherCallFulfilled=function(h){b(this.promise,this.onFulfilled,h)},c.prototype.callRejected=function(h){f.reject(this.promise,h)},c.prototype.otherCallRejected=function(h){b(this.promise,this.onRejected,h)}},{"./handlers":10,"./unwrap":20}],14:[function(g,k,d){function b(o){function a(n){f(n).then(function(r){i||(i=!0,j.resolve(m,r))},function(r){i||(i=!0,j.reject(m,r))})}if("[object Array]"!==Object.prototype.toString.call(o)){return l(new TypeError("must be an array"))}var q=o.length,i=!1;if(!q){return f([])}for(var p=-1,m=new c(h);++p<q;){a(o[p])}return m}var c=g("./promise"),l=g("./reject"),f=g("./resolve"),h=g("./INTERNAL"),j=g("./handlers");k.exports=b},{"./INTERNAL":8,"./handlers":10,"./promise":12,"./reject":15,"./resolve":16}],15:[function(f,b,h){function d(j){var i=new g(c);return a.reject(i,j)}var g=f("./promise"),c=f("./INTERNAL"),a=f("./handlers");b.exports=d},{"./INTERNAL":8,"./handlers":10,"./promise":12}],16:[function(m,w,g){function b(c){if(c){return c instanceof d?c:j.resolve(new d(x),c)}var a=typeof c;switch(a){case"boolean":return q;case"undefined":return p;case"object":return v;case"number":return k;case"string":return h}}var d=m("./promise"),x=m("./INTERNAL"),j=m("./handlers");w.exports=b;var q=j.resolve(new d(x),!1),v=j.resolve(new d(x),null),p=j.resolve(new d(x),void 0),k=j.resolve(new d(x),0),h=j.resolve(new d(x),"")},{"./INTERNAL":8,"./handlers":10,"./promise":12}],17:[function(d,a,g){function c(o,l){function p(i){h||(h=!0,f.reject(o,i))}function m(i){h||(h=!0,f.resolve(o,i))}function k(){l(m,p)}var h=!1,j=b(k);"error"===j.status&&p(j.value)}var f=d("./handlers"),b=d("./tryCatch");g.safely=c},{"./handlers":10,"./tryCatch":19}],18:[function(b,a,c){c.REJECTED=["REJECTED"],c.FULFILLED=["FULFILLED"],c.PENDING=["PENDING"]},{}],19:[function(c,a,d){function b(h,f){var i={};try{i.value=h(f),i.status="success"}catch(g){i.status="error",i.value=g}return i}a.exports=b},{}],20:[function(d,a,g){function c(i,h,j){f(function(){var k;try{k=h(j)}catch(l){return b.reject(i,l)}k===i?b.reject(i,new TypeError("Cannot resolve promise with itself")):b.resolve(i,k)})}var f=d("immediate"),b=d("./handlers");a.exports=c},{"./handlers":10,immediate:21}],21:[function(v,A,j){function b(){m=!1,y&&y.length?k=y.concat(k):q=-1,k.length&&h()}function h(){m=!0;for(var c=k.length,a=setTimeout(b);c;){for(y=k,k=[];++q<c;){y[q]()}q=-1,c=k.length}q=-1,m=!1,clearTimeout(a)}function B(a){1!==k.push(a)||m||z()}for(var m,y,z,x=[v("./nextTick"),v("./mutation.js"),v("./messageChannel"),v("./stateChange"),v("./timeout")],q=-1,k=[],w=-1,g=x.length;++w<g;){if(x[w]&&x[w].test&&x[w].test()){z=x[w].install(h);break}}A.exports=B},{"./messageChannel":22,"./mutation.js":23,"./nextTick":4,"./stateChange":24,"./timeout":25}],22:[function(b,a,c){(function(d){c.test=function(){return d.setImmediate?!1:"undefined"!=typeof d.MessageChannel},c.install=function(f){var g=new d.MessageChannel;return g.port1.onmessage=f,function(){g.port2.postMessage(0)}}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],23:[function(b,a,c){(function(f){var d=f.MutationObserver||f.WebKitMutationObserver;c.test=function(){return d},c.install=function(j){var h=0,i=new d(j),g=f.document.createTextNode("");return i.observe(g,{characterData:!0}),function(){g.data=h=++h%2}}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],24:[function(b,a,c){(function(d){c.test=function(){return"document" in d&&"onreadystatechange" in d.document.createElement("script")},c.install=function(f){return function(){var g=d.document.createElement("script");return g.onreadystatechange=function(){f(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},d.document.documentElement.appendChild(g),f}}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],25:[function(b,a,c){c.test=function(){return !0},c.install=function(d){return function(){setTimeout(d,0)}}},{}],26:[function(y,E,k){function b(a){return null===a?String(a):"object"==typeof a||"function"==typeof a?A[g.call(a)]||"object":typeof a}function j(a){return null!==a&&a===a.window}function F(c){if(!c||"object"!==b(c)||c.nodeType||j(c)){return !1}try{if(c.constructor&&!w.call(c,"constructor")&&!w.call(c.constructor.prototype,"isPrototypeOf")){return !1}}catch(a){return !1}var d;for(d in c){}return void 0===d||w.call(c,d)}function q(a){return"function"===b(a)}function B(){for(var f=[],a=-1,i=arguments.length,d=new Array(i);++a<i;){d[a]=arguments[a]}var h={};f.push({args:d,result:{container:h,key:"key"}});for(var c;c=f.pop();){D(f,c.args,c.result)}return h.key}function D(L,R,G){var i,v,P,Q,N,K,I,M=R[0]||{},s=1,J=R.length,H=!1,O=/\d+/;for("boolean"==typeof M&&(H=M,M=R[1]||{},s=2),"object"==typeof M||q(M)||(M={}),J===s&&(M=this,--s);J>s;s++){if(null!=(i=R[s])){I=C(i);for(v in i){if(!(v in Object.prototype)){if(I&&!O.test(v)){continue}if(P=M[v],Q=i[v],M===Q){continue}H&&Q&&(F(Q)||(N=C(Q)))?(N?(N=!1,K=P&&C(P)?P:[]):K=P&&F(P)?P:{},L.push({args:[H,K,Q],result:{container:M,key:v}})):void 0!==Q&&(C(i)&&q(Q)||(M[v]=Q))}}}}G.container[G.key]=M}for(var A={},x=["Boolean","Number","String","Function","Array","Date","RegExp","Object","Error"],m=0;m<x.length;m++){var z=x[m];A["[object "+z+"]"]=z.toLowerCase()}var g=A.toString,w=A.hasOwnProperty,C=Array.isArray||function(a){return"array"===b(a)};E.exports=B},{}],27:[function(b,a,c){a.exports=b("../lib/deps/ajax")},{"../lib/deps/ajax":29}],28:[function(b,a,c){a.exports=b("../lib/deps/promise")},{"../lib/deps/promise":37}],29:[function(b,a,c){(function(k){function h(q,n){function o(l,x,u){if(q.binary||q.json||!q.processData||"string"==typeof l){if(!q.binary&&q.json&&"string"==typeof l){try{l=JSON.parse(l)}catch(w){return u(w)}}}else{l=JSON.stringify(l)}Array.isArray(l)&&(l=l.map(function(r){return r.error||r.missing?f.generateErrorFromResponse(r):r})),u(null,l,x)}function m(x,l){var z,w;if(x.code&&x.status){var y=new Error(x.message||x.code);return y.status=x.status,l(y)}try{z=JSON.parse(x.responseText),w=f.generateErrorFromResponse(z)}catch(u){w=f.generateErrorFromResponse(x)}l(w)}function v(l){return k.browser?"":new g("","binary")}var p=!1,i=d.getArguments(function(l){p||(n.apply(this,l),p=!0)});"function"==typeof q&&(i=q,q={}),q=d.clone(q);var s={method:"GET",headers:{},json:!0,processData:!0,timeout:10000,cache:!1};return q=d.extend(!0,s,q),q.json&&(q.binary||(q.headers.Accept="application/json"),q.headers["Content-Type"]=q.headers["Content-Type"]||"application/json"),q.binary&&(q.encoding=null,q.json=!1),q.processData||(q.json=!1),j(q,function(r,y,x){if(r){return r.status=y?y.statusCode:400,m(r,i)}var u,l=y.headers&&y.headers["content-type"],w=x||v();q.binary||!q.json&&q.processData||"object"==typeof w||!(/json/.test(l)||/^[\s]*\{/.test(w)&&/\}[\s]*$/.test(w))||(w=JSON.parse(w)),y.statusCode>=200&&y.statusCode<300?o(w,y,i):(q.binary&&(w=JSON.parse(w.toString())),u=f.generateErrorFromResponse(w),u.status=y.statusCode,i(u))})}var j=b("request"),g=b("./buffer"),f=b("./errors"),d=b("../utils");a.exports=h}).call(this,b("/Users/nlawson/workspace-node/pouchdb-authentication/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"))},{"../utils":41,"./buffer":31,"./errors":32,"/Users/nlawson/workspace-node/pouchdb-authentication/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":6,request:38}],30:[function(b,a,c){(function(d){function f(h,m){h=h||[],m=m||{};try{return new Blob(h,m)}catch(k){if("TypeError"!==k.name){throw k}for(var l=d.BlobBuilder||d.MSBlobBuilder||d.MozBlobBuilder||d.WebKitBlobBuilder,j=new l,g=0;g<h.length;g+=1){j.append(h[g])}return j.getBlob(m.type)}}a.exports=f}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],31:[function(b,a,c){a.exports={}},{}],32:[function(c,a,f){function b(g){Error.call(g.reason),this.status=g.status,this.name=g.error,this.message=g.reason,this.error=!0}var d=c("inherits");d(b,Error),b.prototype.toString=function(){return JSON.stringify({status:this.status,name:this.name,message:this.message})},f.UNAUTHORIZED=new b({status:401,error:"unauthorized",reason:"Name or password is incorrect."}),f.MISSING_BULK_DOCS=new b({status:400,error:"bad_request",reason:"Missing JSON list of 'docs'"}),f.MISSING_DOC=new b({status:404,error:"not_found",reason:"missing"}),f.REV_CONFLICT=new b({status:409,error:"conflict",reason:"Document update conflict"}),f.INVALID_ID=new b({status:400,error:"invalid_id",reason:"_id field must contain a string"}),f.MISSING_ID=new b({status:412,error:"missing_id",reason:"_id is required for puts"}),f.RESERVED_ID=new b({status:400,error:"bad_request",reason:"Only reserved document ids may start with underscore."}),f.NOT_OPEN=new b({status:412,error:"precondition_failed",reason:"Database not open"}),f.UNKNOWN_ERROR=new b({status:500,error:"unknown_error",reason:"Database encountered an unknown error"}),f.BAD_ARG=new b({status:500,error:"badarg",reason:"Some query argument is invalid"}),f.INVALID_REQUEST=new b({status:400,error:"invalid_request",reason:"Request was invalid"}),f.QUERY_PARSE_ERROR=new b({status:400,error:"query_parse_error",reason:"Some query parameter is invalid"}),f.DOC_VALIDATION=new b({status:500,error:"doc_validation",reason:"Bad special document member"}),f.BAD_REQUEST=new b({status:400,error:"bad_request",reason:"Something wrong with the request"}),f.NOT_AN_OBJECT=new b({status:400,error:"bad_request",reason:"Document must be a JSON object"}),f.DB_MISSING=new b({status:404,error:"not_found",reason:"Database not found"}),f.IDB_ERROR=new b({status:500,error:"indexed_db_went_bad",reason:"unknown"}),f.WSQ_ERROR=new b({status:500,error:"web_sql_went_bad",reason:"unknown"}),f.LDB_ERROR=new b({status:500,error:"levelDB_went_went_bad",reason:"unknown"}),f.FORBIDDEN=new b({status:403,error:"forbidden",reason:"Forbidden by design doc validate_doc_update function"}),f.INVALID_REV=new b({status:400,error:"bad_request",reason:"Invalid rev format"}),f.FILE_EXISTS=new b({status:412,error:"file_exists",reason:"The database could not be created, the file already exists."}),f.MISSING_STUB=new b({status:412,error:"missing_stub"}),f.error=function(h,g,j){function i(k){for(var l in h){"function"!=typeof h[l]&&(this[l]=h[l])}void 0!==j&&(this.name=j),void 0!==k&&(this.reason=k)}return i.prototype=b.prototype,new i(g)},f.getErrorTypeByProp=function(l,h,k){var m=f,j=Object.keys(m).filter(function(o){var i=m[o];return"function"!=typeof i&&i[l]===h}),g=k&&j.filter(function(n){var i=m[n];return i.message===k})[0]||j[0];return g?m[g]:null},f.generateErrorFromResponse=function(m){var j,l,n,k,h,g=f;return l=m.error===!0&&"string"==typeof m.name?m.name:m.error,h=m.reason,n=g.getErrorTypeByProp("name",l,h),m.missing||"missing"===h||"deleted"===h||"not_found"===l?n=g.MISSING_DOC:"doc_validation"===l?(n=g.DOC_VALIDATION,k=h):"bad_request"===l&&n.message!==h&&(0===h.indexOf("unknown stub attachment")?(n=g.MISSING_STUB,k=h):n=g.BAD_REQUEST),n||(n=g.getErrorTypeByProp("status",m.status,h)||g.UNKNOWN_ERROR),j=g.error(n,h,l),k&&(j.message=k),m.id&&(j.id=m.id),m.status&&(j.status=m.status),m.statusText&&(j.name=m.statusText),m.missing&&(j.missing=m.missing),j}},{inherits:7}],33:[function(b,a,c){(function(f,g){function d(h){f.browser&&"console" in g&&"info" in console&&console.info("The above 404 is totally normal. "+h)}a.exports=d}).call(this,b("/Users/nlawson/workspace-node/pouchdb-authentication/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"/Users/nlawson/workspace-node/pouchdb-authentication/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":6}],34:[function(b,a,c){(function(h,d){function g(i){var f=[255&i,i>>>8&255,i>>>16&255,i>>>24&255];return f.map(function(l){return String.fromCharCode(l)}).join("")}function v(i){for(var f="",l=0;l<i.length;l++){f+=g(i[l])}return btoa(f)}function k(l,f,o,i){(o>0||i<f.byteLength)&&(f=new Uint8Array(f,o,Math.min(i,f.byteLength)-o)),l.append(f)}function q(l,f,o,i){(o>0||i<f.length)&&(f=f.substring(o,i)),l.appendBinary(f)}var t=b("crypto"),p=b("spark-md5"),m=d.setImmediate||d.setTimeout,j=32768;a.exports=function(w,B){function f(){var D=n*s,C=D+s;if(n++,A>n){u(z,w,D,C),m(f)}else{u(z,w,D,C);var y=z.end(!0),r=v(y);B(null,r),z.destroy()}}if(!h.browser){var l=t.createHash("md5").update(w).digest("base64");return void B(null,l)}var x="string"==typeof w,i=x?w.length:w.byteLength,s=Math.min(j,i),A=Math.ceil(i/s),n=0,z=x?new p:new p.ArrayBuffer,u=x?q:k;f()}}).call(this,b("/Users/nlawson/workspace-node/pouchdb-authentication/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"/Users/nlawson/workspace-node/pouchdb-authentication/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":6,crypto:4,"spark-md5":47}],35:[function(h,m,f){function b(a){return a.reduce(function(i,c){return i[c]=!0,i},{})}function d(i){if(!/^\d+\-./.test(i)){return g.error(g.INVALID_REV)}var a=i.indexOf("-"),o=i.substring(0,a),c=i.substring(a+1);return{prefix:parseInt(o,10),id:c}}function p(v,c){for(var x=v.start-v.ids.length+1,u=v.ids,w=[u[0],c,[]],q=1,a=u.length;a>q;q++){w=[u[q],{status:"missing"},[w]]}return[{pos:x,ids:w}]}var g=h("./errors"),k=h("./uuid"),l=b(["_id","_rev","_attachments","_deleted","_revisions","_revs_info","_conflicts","_deleted_conflicts","_local_seq","_rev_tree","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats","_removed"]),j=b(["_attachments","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats"]);f.invalidIdError=function(c){var a;if(c?"string"!=typeof c?a=g.error(g.INVALID_ID):/^_/.test(c)&&!/^_(design|local)/.test(c)&&(a=g.error(g.RESERVED_ID)):a=g.error(g.MISSING_ID),a){throw a}},f.parseDoc=function(s,x){var a,q,n,u={status:"available"};if(s._deleted&&(u.deleted=!0),x){if(s._id||(s._id=k()),q=k(32,16).toLowerCase(),s._rev){if(n=d(s._rev),n.error){return n}s._rev_tree=[{pos:n.prefix,ids:[n.id,{status:"missing"},[[q,u,[]]]]}],a=n.prefix+1}else{s._rev_tree=[{pos:1,ids:[q,u,[]]}],a=1}}else{if(s._revisions&&(s._rev_tree=p(s._revisions,u),a=s._revisions.start,q=s._revisions.ids[0]),!s._rev_tree){if(n=d(s._rev),n.error){return n}a=n.prefix,q=n.id,s._rev_tree=[{pos:a,ids:[q,u,[]]}]}}f.invalidIdError(s._id),s._rev=a+"-"+q;var c={metadata:{},data:{}};for(var o in s){if(s.hasOwnProperty(o)){var w="_"===o[0];if(w&&!l[o]){var i=g.error(g.DOC_VALIDATION,o);throw i.message=g.DOC_VALIDATION.message+": "+o,i}w&&!j[o]?c.metadata[o.slice(1)]=s[o]:c.data[o]=s[o]}}return c}},{"./errors":32,"./uuid":39}],36:[function(c,a,f){function b(o){for(var k=d,p=k.parser[k.strictMode?"strict":"loose"].exec(o),m={},l=14;l--;){var j=k.key[l],g=p[l]||"",h=-1!==["user","password"].indexOf(j);m[j]=h?decodeURIComponent(g):g}return m[k.q.name]={},m[k.key[12]].replace(k.q.parser,function(i,r,q){r&&(m[k.q.name][r]=q)}),m}var d={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};a.exports=b},{}],37:[function(b,a,c){"function"==typeof Promise?a.exports=Promise:a.exports=b("bluebird")},{bluebird:11}],38:[function(h,d,k){function g(){for(var l={},a=new b.Promise(function(o,p){l.resolve=o,l.reject=p}),m=new Array(arguments.length),i=0;i<m.length;i++){m[i]=arguments[i]}return l.then=a.then.bind(a),l["catch"]=a["catch"].bind(a),l.promise=a,fetch.apply(null,m).then(function(n){l.resolve(n)},function(n){l.reject(n)})["catch"](function(n){l["catch"](n)}),l}function j(q,m){var v,r,p,l=new Headers,a={method:q.method,credentials:"include",headers:l};return q.json&&(l.set("Accept","application/json"),l.set("Content-Type",q.headers["Content-Type"]||"application/json")),q.body&&q.body instanceof Blob?b.readAsBinaryString(q.body,function(i){a.body=b.fixBinary(i)}):q.body&&q.processData&&"string"!=typeof q.body?a.body=JSON.stringify(q.body):"body" in q?a.body=q.body:a.body=null,Object.keys(q.headers).forEach(function(i){q.headers.hasOwnProperty(i)&&l.set(i,q.headers[i])}),v=g(q.url,a),q.timeout>0&&(r=setTimeout(function(){v.reject(new Error("Load timeout for resource: "+q.url))},q.timeout)),v.promise.then(function(i){var o;return p=i,q.timeout>0&&clearTimeout(r),i.status>=200&&i.status<300?q.binary?i.blob():i.text():o.json()}).then(function(i){p.status>=200&&p.status<300?m(null,p,i):m(i,p)})["catch"](function(i){m(i,p)}),{abort:v.reject}}function f(p,i){var w,m,q,l=function(){w.abort()};if(w=p.xhr?new p.xhr:new XMLHttpRequest,"GET"===p.method&&!p.cache){var a=-1!==p.url.indexOf("?");p.url+=(a?"&":"?")+"_nonce="+Date.now()}w.open(p.method,p.url),w.withCredentials=!0,"GET"===p.method?delete p.headers["Content-Type"]:p.json&&(p.headers.Accept="application/json",p.headers["Content-Type"]=p.headers["Content-Type"]||"application/json",p.body&&p.processData&&"string"!=typeof p.body&&(p.body=JSON.stringify(p.body))),p.binary&&(w.responseType="arraybuffer"),"body" in p||(p.body=null);for(var v in p.headers){p.headers.hasOwnProperty(v)&&w.setRequestHeader(v,p.headers[v])}return p.timeout>0&&(m=setTimeout(l,p.timeout),w.onprogress=function(){clearTimeout(m),m=setTimeout(l,p.timeout)},"undefined"==typeof q&&(q=-1!==Object.keys(w).indexOf("upload")&&"undefined"!=typeof w.upload),q&&(w.upload.onprogress=w.onprogress)),w.onreadystatechange=function(){if(4===w.readyState){var u={statusCode:w.status};if(w.status>=200&&w.status<300){var x;x=p.binary?c([w.response||""],{type:w.getResponseHeader("Content-Type")}):w.responseText,i(null,u,x)}else{var t={};try{t=JSON.parse(w.response)}catch(n){}i(t,u)}}},p.body&&p.body instanceof Blob?b.readAsBinaryString(p.body,function(n){w.send(b.fixBinary(n))}):w.send(p.body),{abort:l}}var c=h("./blob.js"),b=h("../utils");d.exports=function(i,a){return"undefined"!=typeof XMLHttpRequest||i.xhr?f(i,a):j(i,a)}},{"../utils":41,"./blob.js":30}],39:[function(b,a,c){a.exports=b(3)},{}],40:[function(m,w,g){function b(i,a,u){for(var f,l=0,c=i.length;c>l;){f=l+c>>>1,u(i[f],a)<0?l=f+1:c=f}return l}function d(c,a,i){var f=b(c,a,i);c.splice(f,0,a)}function x(f){for(var a,l=f.shift(),c=[l.id,l.opts,[]],i=c;f.length;){l=f.shift(),a=[l.id,l.opts,[]],i[2].push(a),i=a}return c}function j(c,a){return c[0]<a[0]?-1:1}function q(A,E){for(var o=[{tree1:A,tree2:E}],i=!1;o.length>0;){var F=o.pop(),C=F.tree1,D=F.tree2;(C[1].status||D[1].status)&&(C[1].status="available"===C[1].status||"available"===D[1].status?"available":"missing");for(var B=0;B<D[2].length;B++){if(C[2][0]){for(var z=!1,y=0;y<C[2].length;y++){C[2][y][0]===D[2][B][0]&&(o.push({tree1:C[2][y],tree2:D[2][B]}),z=!0)}z||(i="new_branch",d(C[2],D[2][B],j))}else{i="new_leaf",C[2][0]=D[2][B]}}}return{conflicts:i,tree:A}}function v(u,c,z){var l,y=[],f=!1,a=!1;return u.length?(u.forEach(function(t){if(t.pos===c.pos&&t.ids[0]===c.ids[0]){l=q(t.ids,c.ids),y.push({pos:t.pos,ids:l.tree}),f=f||l.conflicts,a=!0}else{if(z!==!0){var n=t.pos<c.pos?t:c,B=t.pos<c.pos?c:t,r=B.pos-n.pos,i=[],A=[];for(A.push({ids:n.ids,diff:r,parent:null,parentIdx:null});A.length>0;){var s=A.pop();0!==s.diff?s.ids&&s.ids[2].forEach(function(D,C){A.push({ids:D,diff:s.diff-1,parent:s.ids,parentIdx:C})}):s.ids[0]===B.ids[0]&&i.push(s)}var o=i[0];o?(l=q(o.ids,B.ids),o.parent[2][o.parentIdx]=l.tree,y.push({pos:n.pos,ids:n.ids}),f=f||l.conflicts,a=!0):y.push(t)}else{y.push(t)}}}),a||y.push(c),y.sort(function(n,i){return n.pos-i.pos}),{tree:y,conflicts:f||"internal_node"}):{tree:[c],conflicts:"new_leaf"}}function p(c,a){var f=h.rootToLeaf(c).map(function(i){var l=i.ids.slice(-a);return{pos:i.pos+(i.ids.length-l.length),ids:x(l)}});return f.reduce(function(l,i){return v(l,i,!0).tree},[f.shift()])}var k=m("pouchdb-extend"),h={};h.merge=function(f,a,i){f=k(!0,[],f),a=k(!0,{},a);var c=v(f,a);return{tree:p(c.tree,i),conflicts:c.conflicts}},h.winningRev=function(c){var a=[];return h.traverseRevTree(c.rev_tree,function(l,u,i,t,f){l&&a.push({pos:u,id:i,deleted:!!f.deleted})}),a.sort(function(i,f){return i.deleted!==f.deleted?i.deleted>f.deleted?1:-1:i.pos!==f.pos?f.pos-i.pos:i.id<f.id?1:-1}),a[0].pos+"-"+a[0].id},h.traverseRevTree=function(A,E){for(var y,f=A.slice();y=f.pop();){for(var l=y.pos,F=y.ids,z=F[2],C=E(0===z.length,l,F[0],y.ctx,F[1]),D=0,B=z.length;B>D;D++){f.push({pos:l+1,ids:z[D],ctx:C})}}},h.collectLeaves=function(c){var a=[];return h.traverseRevTree(c,function(l,u,i,t,f){l&&a.push({rev:u+"-"+i,pos:u,opts:f})}),a.sort(function(i,f){return f.pos-i.pos}),a.forEach(function(f){delete f.pos}),a},h.collectConflicts=function(f){var a=h.winningRev(f),i=h.collectLeaves(f.rev_tree),c=[];return i.forEach(function(l){l.rev===a||l.opts.deleted||c.push(l.rev)}),c},h.rootToLeaf=function(c){var a=[];return h.traverseRevTree(c,function(u,z,t,y,l){if(y=y?y.slice(0):[],y.push({id:t,opts:l}),u){var f=z+1-y.length;a.unshift({pos:f,ids:y})}return y}),a},w.exports=h},{"pouchdb-extend":26}],41:[function(b,a,c){(function(w){function g(){return"undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage&&"undefined"!=typeof chrome.storage.local}function h(){if(!(this instanceof h)){return new h}var d=this;v.call(this),this.isChrome=g(),this.listeners={},this.hasLocal=!1,this.isChrome||(this.hasLocal=c.hasLocalStorage()),this.isChrome?chrome.storage.onChanged.addListener(function(f){null!=f.db_name&&d.emit(f.dbName.newValue)}):this.hasLocal&&("undefined"!=typeof addEventListener?addEventListener("storage",function(f){d.emit(f.key)}):window.attachEvent("storage",function(f){d.emit(f.key)}))}var x=b("./merge");c.extend=b("pouchdb-extend"),c.ajax=b("./deps/ajax"),c.createBlob=b("./deps/blob"),c.uuid=b("./deps/uuid"),c.getArguments=b("argsarray");var k=b("./deps/buffer"),q=b("./deps/errors"),v=b("events").EventEmitter,p=b("pouchdb-collections");c.Map=p.Map,c.Set=p.Set;var m=b("./deps/parse-doc"),j=b("./deps/promise");c.Promise=j,c.lastIndexOf=function(f,d){for(var i=f.length-1;i>=0;i--){if(f.charAt(i)===d){return i}}return -1},c.clone=function(d){return c.extend(!0,{},d)},c.pick=function(l,d){for(var y={},i=0,u=d.length;u>i;i++){var f=d[i];y[f]=l[f]}return y},c.inherits=b("inherits"),c.call=c.getArguments(function(f){if(f.length){var d=f.shift();"function"==typeof d&&d.apply(this,f)}}),c.isLocalId=function(d){return/^_local/.test(d)},c.isDeleted=function(i,d){d||(d=x.winningRev(i));var l=d.indexOf("-");-1!==l&&(d=d.substring(l+1));var f=!1;return x.traverseRevTree(i.rev_tree,function(u,z,y,t,r){y===d&&(f=!!r.deleted)}),f},c.revExists=function(f,d){var i=!1;return x.traverseRevTree(f.rev_tree,function(s,l,t){l+"-"+t===d&&(i=!0)}),i},c.filterChange=function(f){var d={},i=f.filter&&"function"==typeof f.filter;return d.query=f.query_params,function(l){if(l.doc||(l.doc={}),f.filter&&i&&!f.filter.call(this,l.doc,d)){return !1}if(f.include_docs){if(!f.attachments){for(var s in l.doc._attachments){l.doc._attachments.hasOwnProperty(s)&&(l.doc._attachments[s].stub=!0)}}}else{delete l.doc}return !0}},c.parseDoc=m.parseDoc,c.invalidIdError=m.invalidIdError,c.isCordova=function(){return"undefined"!=typeof cordova||"undefined"!=typeof PhoneGap||"undefined"!=typeof phonegap},c.hasLocalStorage=function(){if(g()){return !1}try{return localStorage}catch(d){return !1}},c.Changes=h,c.inherits(h,v),h.prototype.addListener=function(z,y,A,t){function l(){if(d.listeners[y]){if(f){return void (f="waiting")}f=!0,A.changes({style:t.style,include_docs:t.include_docs,attachments:t.attachments,conflicts:t.conflicts,continuous:!1,descending:!1,filter:t.filter,doc_ids:t.doc_ids,view:t.view,since:t.since,query_params:t.query_params}).on("change",function(i){i.seq>t.since&&!t.cancelled&&(t.since=i.seq,c.call(t.onChange,i))}).on("complete",function(){"waiting"===f&&w.nextTick(function(){d.notify(z)}),f=!1}).on("error",function(){f=!1})}}if(!this.listeners[y]){var d=this,f=!1;this.listeners[y]=l,this.on(z,l)}},h.prototype.removeListener=function(f,d){d in this.listeners&&v.prototype.removeListener.call(this,f,this.listeners[d])},h.prototype.notifyLocalWindows=function(d){this.isChrome?chrome.storage.local.set({dbName:d}):this.hasLocal&&(localStorage[d]="a"===localStorage[d]?"b":"a")},h.prototype.notify=function(d){this.emit(d),this.notifyLocalWindows(d)},"function"==typeof atob?c.atob=function(d){return atob(d)}:c.atob=function(f){var d=new k(f,"base64");if(d.toString("base64")!==f){throw"Cannot base64 encode full string"}return d.toString("binary")},"function"==typeof btoa?c.btoa=function(d){return btoa(d)}:c.btoa=function(d){return new k(d,"binary").toString("base64")},c.fixBinary=function(i){if(!w.browser){return i}for(var t=i.length,f=new ArrayBuffer(t),l=new Uint8Array(f),d=0;t>d;d++){l[d]=i.charCodeAt(d)}return f},c.readAsBinaryString=function(i,d){var f=new FileReader,l="function"==typeof f.readAsBinaryString;f.onloadend=function(s){var o=s.target.result||"";return l?d(o):void d(c.arrayBufferToBinaryString(o))},l?f.readAsBinaryString(i):f.readAsArrayBuffer(i)},c.readAsArrayBuffer=function(f,d){var i=new FileReader;i.onloadend=function(l){var o=l.target.result||new ArrayBuffer(0);d(o)},i.readAsArrayBuffer(f)},c.once=function(f){var d=!1;return c.getArguments(function(i){if(d){throw new Error("once called  more than once")}d=!0,f.apply(this,i)})},c.toPromise=function(d){return c.getArguments(function(u){var y,t=this,l="function"==typeof u[u.length-1]?u.pop():!1;l&&(y=function(i,o){w.nextTick(function(){l(i,o)})});var f=new j(function(A,B){var z;try{var r=c.once(function(i,o){i?B(i):A(o)});u.push(r),z=d.apply(t,u),z&&"function"==typeof z.then&&A(z)}catch(s){B(s)}});return y&&f.then(function(i){y(null,i)},y),f.cancel=function(){return this},f})},c.adapterFun=function(d,i){function l(z,u,B){if(f.enabled){for(var y=[z._db_name,u],A=0;A<B.length-1;A++){y.push(B[A])}f.apply(null,y);var s=B[B.length-1];B[B.length-1]=function(D,t){var C=[z._db_name,u];C=C.concat(D?["error",D]:["success",t]),f.apply(null,C),s(D,t)}}}var f=b("debug")("pouchdb:api");return c.toPromise(c.getArguments(function(o){if(this._closed){return j.reject(new Error("database is closed"))}var r=this;return l(r,d,o),this.taskqueue.isReady?i.apply(this,o):new j(function(s,t){r.taskqueue.addTask(function(u){u?t(u):s(r[d].apply(r,o))})})}))},c.arrayBufferToBinaryString=function(i){for(var d="",s=new Uint8Array(i),f=s.byteLength,l=0;f>l;l++){d+=String.fromCharCode(s[l])}return d},c.cancellableFun=function(z,C,d){d=d?c.clone(!0,{},d):{};var l=new v,D=d.complete||function(){},u=d.complete=c.once(function(i,f){i?D(i):(l.emit("end",f),D(null,f)),l.removeAllListeners()}),B=d.onChange||function(){},A=0;C.on("destroyed",function(){l.removeAllListeners()}),d.onChange=function(f){B(f),f.seq<=A||(A=f.seq,l.emit("change",f),f.deleted?l.emit("delete",f):1===f.changes.length&&"1-"===f.changes[0].rev.slice(0,1)?l.emit("create",f):l.emit("update",f))};var y=new j(function(i,f){d.complete=function(s,o){s?f(s):i(o)}});return y.then(function(f){u(null,f)},u),y.cancel=function(){y.isCancelled=!0,C.taskqueue.isReady&&d.complete(null,{status:"cancelled"})},C.taskqueue.isReady?z(C,d,y):C.taskqueue.addTask(function(){y.isCancelled?d.complete(null,{status:"cancelled"}):z(C,d,y)}),y.on=l.on.bind(l),y.once=l.once.bind(l),y.addListener=l.addListener.bind(l),y.removeListener=l.removeListener.bind(l),y.removeAllListeners=l.removeAllListeners.bind(l),y.setMaxListeners=l.setMaxListeners.bind(l),y.listeners=l.listeners.bind(l),y.emit=l.emit.bind(l),y},c.MD5=c.toPromise(b("./deps/md5")),c.explain404=b("./deps/explain404"),c.info=function(d){"undefined"!=typeof console&&"info" in console&&console.info(d)},c.parseUri=b("./deps/parse-uri"),c.compare=function(f,d){return d>f?-1:f>d?1:0},c.updateDoc=function(N,D,E,G,J,C,P){if(c.revExists(N,D.metadata.rev)){return E[G]=D,J()}var M=x.winningRev(N),I=c.isDeleted(N,M),O=c.isDeleted(D.metadata),F=/^1-/.test(D.metadata.rev);if(I&&!O&&P&&F){var K=D.data;K._rev=M,K._id=D.metadata.id,D=c.parseDoc(K,P)}var B=x.merge(N.rev_tree,D.metadata.rev_tree[0],1000),H=P&&(I&&O||!I&&"new_leaf"!==B.conflicts||I&&!O&&"new_branch"===B.conflicts);if(H){var s=q.error(q.REV_CONFLICT);return E[G]=s,J()}var L=D.metadata.rev;D.metadata.rev_tree=B.tree,N.rev_map&&(D.metadata.rev_map=N.rev_map);var Q=x.winningRev(D.metadata),R=c.isDeleted(D.metadata,Q),A=I===R?0:R>I?-1:1,z=c.isDeleted(D.metadata,L);C(D,Q,R,z,!0,A,G,J)},c.processDocs=function(F,K,s,z,C,J,H,E){function B(M,i,u){var N=x.winningRev(M.metadata),L=c.isDeleted(M.metadata,N);if("was_delete" in H&&L){return C[i]=q.error(q.MISSING_DOC,"deleted"),u()}var d=L?0:1;J(M,N,L,L,!1,d,i,u)}function G(){++I===A&&E&&E()}if(F.length){var y=H.new_edits,D=new c.Map,I=0,A=F.length;F.forEach(function(i,f){if(i._id&&c.isLocalId(i._id)){return void K[i._deleted?"_removeLocal":"_putLocal"](i,{ctx:z},function(l){l?C[f]=l:C[f]={ok:!0},G()})}var d=i.metadata.id;D.has(d)?(A--,D.get(d).push([i,f])):D.set(d,[[i,f]])}),D.forEach(function(l,f){function r(){++d<l.length?i():G()}function i(){var o=l[d],u=o[0],t=o[1];s.has(f)?c.updateDoc(s.get(f),u,C,t,r,J,y):B(u,t,r)}var d=0;i()})}},c.preprocessAttachments=function(A,l,z){function B(s){try{return c.atob(s)}catch(i){var o=q.error(q.BAD_ARG,"Attachments need to be base64 encoded");return{error:o}}}function y(t,o){if(t.stub){return o()}if("string"==typeof t.data){var i=B(t.data);if(i.error){return o(i.error)}t.length=i.length,"blob"===l?t.data=c.createBlob([c.fixBinary(i)],{type:t.content_type}):"base64"===l?t.data=c.btoa(i):t.data=i,c.MD5(i).then(function(r){t.digest="md5-"+r,o()})}else{c.readAsArrayBuffer(t.data,function(r){"binary"===l?t.data=c.arrayBufferToBinaryString(r):"base64"===l&&(t.data=c.btoa(c.arrayBufferToBinaryString(r))),c.MD5(r).then(function(s){t.digest="md5-"+s,t.length=r.byteLength,o()})})}}function f(){C++,A.length===C&&(d?z(d):z())}if(!A.length){return z()}var d,C=0;A.forEach(function(u){function i(o){d=o,s++,s===E.length&&f()}var E=u.data&&u.data._attachments?Object.keys(u.data._attachments):[],s=0;if(!E.length){return f()}for(var D in u.data._attachments){u.data._attachments.hasOwnProperty(D)&&y(u.data._attachments[D],i)}})},c.compactTree=function(f){var d=[];return x.traverseRevTree(f.rev_tree,function(t,y,l,u,i){"available"!==i.status||t||(d.push(y+"-"+l),i.status="missing")}),d};var n=b("vuvuzela");c.safeJsonParse=function(f){try{return JSON.parse(f)}catch(d){return n.parse(f)}},c.safeJsonStringify=function(f){try{return JSON.stringify(f)}catch(d){return n.stringify(f)}}}).call(this,b("/Users/nlawson/workspace-node/pouchdb-authentication/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"))},{"./deps/ajax":29,"./deps/blob":30,"./deps/buffer":31,"./deps/errors":32,"./deps/explain404":33,"./deps/md5":34,"./deps/parse-doc":35,"./deps/parse-uri":36,"./deps/promise":37,"./deps/uuid":39,"./merge":40,"/Users/nlawson/workspace-node/pouchdb-authentication/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":6,argsarray:42,debug:43,events:5,inherits:7,"pouchdb-collections":46,"pouchdb-extend":26,vuvuzela:48}],42:[function(c,a,d){function b(f){return function(){var g=arguments.length;if(g){for(var i=[],h=-1;++h<g;){i[h]=arguments[h]}return f.call(this,i)}return f.call(this,[])}}a.exports=b},{}],43:[function(g,k,d){function b(){return"WebkitAppearance" in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function c(){var n=arguments,a=this.useColors;if(n[0]=(a?"%c":"")+this.namespace+(a?" %c":" ")+n[0]+(a?"%c ":" ")+"+"+d.humanize(this.diff),!a){return n}var m="color: "+this.color;n=[n[0],m,"color: inherit"].concat(Array.prototype.slice.call(n,1));var p=0,i=0;return n[0].replace(/%[a-z%]/g,function(o){"%%"!==o&&(p++,"%c"===o&&(i=p))}),n.splice(i,0,m),n}function l(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function f(i){try{null==i?d.storage.removeItem("debug"):d.storage.debug=i}catch(a){}}function h(){var i;try{i=d.storage.debug}catch(a){}return i}function j(){try{return window.localStorage}catch(a){}}d=k.exports=g("./debug"),d.log=l,d.formatArgs=c,d.save=f,d.load=h,d.useColors=b,d.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:j(),d.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],d.formatters.j=function(a){return JSON.stringify(a)},d.enable(h())},{"./debug":44}],44:[function(k,q,g){function b(){return g.colors[j++%g.colors.length]}function d(f){function a(){}function i(){var y=i,w=+new Date,x=w-(l||w);y.diff=x,y.prev=l,y.curr=w,l=w,null==y.useColors&&(y.useColors=g.useColors()),null==y.color&&y.useColors&&(y.color=b());var r=Array.prototype.slice.call(arguments);r[0]=g.coerce(r[0]),"string"!=typeof r[0]&&(r=["%o"].concat(r));var n=0;r[0]=r[0].replace(/%([a-z%])/g,function(u,A){if("%%"===u){return u}n++;var B=g.formatters[A];if("function"==typeof B){var z=r[n];u=B.call(y,z),r.splice(n,1),n--}return u}),"function"==typeof g.formatArgs&&(r=g.formatArgs.apply(y,r));var o=i.log||g.log||console.log.bind(console);o.apply(y,r)}a.enabled=!1,i.enabled=!0;var c=g.enabled(f)?i:a;return c.namespace=f,c}function v(f){g.save(f);for(var a=(f||"").split(/[\s,]+/),c=a.length,i=0;c>i;i++){a[i]&&(f=a[i].replace(/\*/g,".*?"),"-"===f[0]?g.skips.push(new RegExp("^"+f.substr(1)+"$")):g.names.push(new RegExp("^"+f+"$")))}}function h(){g.enable("")}function m(f){var a,c;for(a=0,c=g.skips.length;c>a;a++){if(g.skips[a].test(f)){return !1}}for(a=0,c=g.names.length;c>a;a++){if(g.names[a].test(f)){return !0}}return !1}function p(a){return a instanceof Error?a.stack||a.message:a}g=q.exports=d,g.coerce=p,g.disable=h,g.enable=v,g.enabled=m,g.humanize=k("ms"),g.names=[],g.skips=[],g.formatters={};var l,j=0},{ms:45}],45:[function(m,w,g){function b(f){if(f=""+f,!(f.length>10000)){var a=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(f);if(a){var i=parseFloat(a[1]),c=(a[2]||"ms").toLowerCase();switch(c){case"years":case"year":case"yrs":case"yr":case"y":return i*h;case"days":case"day":case"d":return i*k;case"hours":case"hour":case"hrs":case"hr":case"h":return i*p;case"minutes":case"minute":case"mins":case"min":case"m":return i*v;case"seconds":case"second":case"secs":case"sec":case"s":return i*q;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return i}}}}function d(a){return a>=k?Math.round(a/k)+"d":a>=p?Math.round(a/p)+"h":a>=v?Math.round(a/v)+"m":a>=q?Math.round(a/q)+"s":a+"ms"}function x(a){return j(a,k,"day")||j(a,p,"hour")||j(a,v,"minute")||j(a,q,"second")||a+" ms"}function j(c,a,f){return a>c?void 0:1.5*a>c?Math.floor(c/a)+" "+f:Math.ceil(c/a)+" "+f+"s"}var q=1000,v=60*q,p=60*v,k=24*p,h=365.25*k;w.exports=function(c,a){return a=a||{},"string"==typeof c?b(c):a["long"]?x(c):d(c)}},{}],46:[function(c,a,f){function b(){this.store={}}function d(h){if(this.store=new b,h&&Array.isArray(h)){for(var g=0,i=h.length;i>g;g++){this.add(h[g])}}}f.Map=b,f.Set=d,b.prototype.mangle=function(g){if("string"!=typeof g){throw new TypeError("key must be a string but Got "+g)}return"$"+g},b.prototype.unmangle=function(g){return g.substring(1)},b.prototype.get=function(h){var g=this.mangle(h);return g in this.store?this.store[g]:void 0},b.prototype.set=function(h,g){var i=this.mangle(h);return this.store[i]=g,!0},b.prototype.has=function(h){var g=this.mangle(h);return g in this.store},b.prototype["delete"]=function(h){var g=this.mangle(h);return g in this.store?(delete this.store[g],!0):!1},b.prototype.forEach=function(h){var g=this,i=Object.keys(g.store);i.forEach(function(k){var j=g.store[k];k=g.unmangle(k),h(j,k)})},d.prototype.add=function(g){return this.store.set(g,!0)},d.prototype.has=function(g){return this.store.has(g)},d.prototype["delete"]=function(g){return this.store["delete"](g)}},{}],47:[function(b,a,c){!function(f){if("object"==typeof c){a.exports=f()}else{if("function"==typeof define&&define.amd){define(f)}else{var d;try{d=window}catch(g){d=self}d.SparkMD5=f()}}}(function(B){var H=function(f,d){return f+d&4294967295},q=function(l,p,h,m,f,d){return p=H(H(p,l),H(m,d)),H(p<<f|p>>>32-f,h)},g=function(n,h,m,p,l,f,d){return q(h&m|~h&p,n,h,l,f,d)},k=function(n,h,m,p,l,f,d){return q(h&p|m&~p,n,h,l,f,d)},I=function(n,h,m,p,l,f,d){return q(h^m^p,n,h,l,f,d)},y=function(n,h,m,p,l,f,d){return q(m^(h|~p),n,h,l,f,d)},E=function(l,o){var d=l[0],h=l[1],m=l[2],i=l[3];d=g(d,h,m,i,o[0],7,-680876936),i=g(i,d,h,m,o[1],12,-389564586),m=g(m,i,d,h,o[2],17,606105819),h=g(h,m,i,d,o[3],22,-1044525330),d=g(d,h,m,i,o[4],7,-176418897),i=g(i,d,h,m,o[5],12,1200080426),m=g(m,i,d,h,o[6],17,-1473231341),h=g(h,m,i,d,o[7],22,-45705983),d=g(d,h,m,i,o[8],7,1770035416),i=g(i,d,h,m,o[9],12,-1958414417),m=g(m,i,d,h,o[10],17,-42063),h=g(h,m,i,d,o[11],22,-1990404162),d=g(d,h,m,i,o[12],7,1804603682),i=g(i,d,h,m,o[13],12,-40341101),m=g(m,i,d,h,o[14],17,-1502002290),h=g(h,m,i,d,o[15],22,1236535329),d=k(d,h,m,i,o[1],5,-165796510),i=k(i,d,h,m,o[6],9,-1069501632),m=k(m,i,d,h,o[11],14,643717713),h=k(h,m,i,d,o[0],20,-373897302),d=k(d,h,m,i,o[5],5,-701558691),i=k(i,d,h,m,o[10],9,38016083),m=k(m,i,d,h,o[15],14,-660478335),h=k(h,m,i,d,o[4],20,-405537848),d=k(d,h,m,i,o[9],5,568446438),i=k(i,d,h,m,o[14],9,-1019803690),m=k(m,i,d,h,o[3],14,-187363961),h=k(h,m,i,d,o[8],20,1163531501),d=k(d,h,m,i,o[13],5,-1444681467),i=k(i,d,h,m,o[2],9,-51403784),m=k(m,i,d,h,o[7],14,1735328473),h=k(h,m,i,d,o[12],20,-1926607734),d=I(d,h,m,i,o[5],4,-378558),i=I(i,d,h,m,o[8],11,-2022574463),m=I(m,i,d,h,o[11],16,1839030562),h=I(h,m,i,d,o[14],23,-35309556),d=I(d,h,m,i,o[1],4,-1530992060),i=I(i,d,h,m,o[4],11,1272893353),m=I(m,i,d,h,o[7],16,-155497632),h=I(h,m,i,d,o[10],23,-1094730640),d=I(d,h,m,i,o[13],4,681279174),i=I(i,d,h,m,o[0],11,-358537222),m=I(m,i,d,h,o[3],16,-722521979),h=I(h,m,i,d,o[6],23,76029189),d=I(d,h,m,i,o[9],4,-640364487),i=I(i,d,h,m,o[12],11,-421815835),m=I(m,i,d,h,o[15],16,530742520),h=I(h,m,i,d,o[2],23,-995338651),d=y(d,h,m,i,o[0],6,-198630844),i=y(i,d,h,m,o[7],10,1126891415),m=y(m,i,d,h,o[14],15,-1416354905),h=y(h,m,i,d,o[5],21,-57434055),d=y(d,h,m,i,o[12],6,1700485571),i=y(i,d,h,m,o[3],10,-1894986606),m=y(m,i,d,h,o[10],15,-1051523),h=y(h,m,i,d,o[1],21,-2054922799),d=y(d,h,m,i,o[8],6,1873313359),i=y(i,d,h,m,o[15],10,-30611744),m=y(m,i,d,h,o[6],15,-1560198380),h=y(h,m,i,d,o[13],21,1309151649),d=y(d,h,m,i,o[4],6,-145523070),i=y(i,d,h,m,o[11],10,-1120210379),m=y(m,i,d,h,o[2],15,718787259),h=y(h,m,i,d,o[9],21,-343485551),l[0]=H(d,l[0]),l[1]=H(h,l[1]),l[2]=H(m,l[2]),l[3]=H(i,l[3])},G=function(f){var d,h=[];for(d=0;64>d;d+=4){h[d>>2]=f.charCodeAt(d)+(f.charCodeAt(d+1)<<8)+(f.charCodeAt(d+2)<<16)+(f.charCodeAt(d+3)<<24)}return h},D=function(f){var d,h=[];for(d=0;64>d;d+=4){h[d>>2]=f[d]+(f[d+1]<<8)+(f[d+2]<<16)+(f[d+3]<<24)}return h},A=function(u){var J,l,d,h,K,m,v=u.length,p=[1732584193,-271733879,-1732584194,271733878];for(J=64;v>=J;J+=64){E(p,G(u.substring(J-64,J)))}for(u=u.substring(J-64),l=u.length,d=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],J=0;l>J;J+=1){d[J>>2]|=u.charCodeAt(J)<<(J%4<<3)}if(d[J>>2]|=128<<(J%4<<3),J>55){for(E(p,d),J=0;16>J;J+=1){d[J]=0}}return h=8*v,h=h.toString(16).match(/(.*?)(.{0,8})$/),K=parseInt(h[2],16),m=parseInt(h[1],16)||0,d[14]=K,d[15]=m,E(p,d),p},x=function(v){var K,l,d,h,L,m,J=v.length,p=[1732584193,-271733879,-1732584194,271733878];for(K=64;J>=K;K+=64){E(p,D(v.subarray(K-64,K)))}for(v=J>K-64?v.subarray(K-64):new Uint8Array(0),l=v.length,d=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],K=0;l>K;K+=1){d[K>>2]|=v[K]<<(K%4<<3)}if(d[K>>2]|=128<<(K%4<<3),K>55){for(E(p,d),K=0;16>K;K+=1){d[K]=0}}return h=8*J,h=h.toString(16).match(/(.*?)(.{0,8})$/),L=parseInt(h[2],16),m=parseInt(h[1],16)||0,d[14]=L,d[15]=m,E(p,d),p},C=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],j=function(f){var d,h="";for(d=0;4>d;d+=1){h+=C[f>>8*d+4&15]+C[f>>8*d&15]}return h},z=function(f){var d;for(d=0;d<f.length;d+=1){f[d]=j(f[d])}return f.join("")},F=function(d){return z(A(d))},w=function(){this.reset()};return"5d41402abc4b2a76b9719d911017c592"!==F("hello")&&(H=function(h,d){var i=(65535&h)+(65535&d),f=(h>>16)+(d>>16)+(i>>16);return f<<16|65535&i}),w.prototype.append=function(d){return/[\u0080-\uFFFF]/.test(d)&&(d=unescape(encodeURIComponent(d))),this.appendBinary(d),this},w.prototype.appendBinary=function(f){this._buff+=f,this._length+=f.length;var d,h=this._buff.length;for(d=64;h>=d;d+=64){E(this._state,G(this._buff.substring(d-64,d)))}return this._buff=this._buff.substr(d-64),this},w.prototype.end=function(i){var d,m,h=this._buff,l=h.length,f=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(d=0;l>d;d+=1){f[d>>2]|=h.charCodeAt(d)<<(d%4<<3)}return this._finish(f,l),m=i?this._state:z(this._state),this.reset(),m},w.prototype._finish=function(i,d){var m,h,l,f=d;if(i[f>>2]|=128<<(f%4<<3),f>55){for(E(this._state,i),f=0;16>f;f+=1){i[f]=0}}m=8*this._length,m=m.toString(16).match(/(.*?)(.{0,8})$/),h=parseInt(m[2],16),l=parseInt(m[1],16)||0,i[14]=h,i[15]=l,E(this._state,i)},w.prototype.reset=function(){return this._buff="",this._length=0,this._state=[1732584193,-271733879,-1732584194,271733878],this},w.prototype.destroy=function(){delete this._state,delete this._buff,delete this._length},w.hash=function(f,d){/[\u0080-\uFFFF]/.test(f)&&(f=unescape(encodeURIComponent(f)));var h=A(f);return d?h:z(h)},w.hashBinary=function(f,d){var h=A(f);return d?h:z(h)},w.ArrayBuffer=function(){this.reset()},w.ArrayBuffer.prototype.append=function(h){var d,i=this._concatArrayBuffer(this._buff,h),f=i.length;for(this._length+=h.byteLength,d=64;f>=d;d+=64){E(this._state,D(i.subarray(d-64,d)))}return this._buff=f>d-64?i.subarray(d-64):new Uint8Array(0),this},w.ArrayBuffer.prototype.end=function(i){var d,m,h=this._buff,l=h.length,f=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(d=0;l>d;d+=1){f[d>>2]|=h[d]<<(d%4<<3)}return this._finish(f,l),m=i?this._state:z(this._state),this.reset(),m},w.ArrayBuffer.prototype._finish=w.prototype._finish,w.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._state=[1732584193,-271733879,-1732584194,271733878],this},w.ArrayBuffer.prototype.destroy=w.prototype.destroy,w.ArrayBuffer.prototype._concatArrayBuffer=function(h,d){var i=h.length,f=new Uint8Array(i+d.byteLength);return f.set(h),f.set(new Uint8Array(d),i),f},w.ArrayBuffer.hash=function(f,d){var h=x(new Uint8Array(f));return d?h:z(h)},w})},{}],48:[function(c,a,d){function b(k,g,m){var j=m[m.length-1];k===j.element&&(m.pop(),j=m[m.length-1]);var l=j.element,h=j.index;if(Array.isArray(l)){l.push(k)}else{if(h===g.length-2){var f=g.pop();l[f]=k}else{g.push(k)}}}d.stringify=function(w){var B=[];B.push({obj:w});for(var k,g,j,C,q,z,A,y,v,m,x,h="";k=B.pop();){if(g=k.obj,j=k.prefix||"",C=k.val||"",h+=j,C){h+=C}else{if("object"!=typeof g){h+="undefined"==typeof g?null:JSON.stringify(g)}else{if(null===g){h+="null"}else{if(Array.isArray(g)){for(B.push({val:"]"}),q=g.length-1;q>=0;q--){z=0===q?"":",",B.push({obj:g[q],prefix:z})}B.push({val:"["})}else{A=[];for(y in g){g.hasOwnProperty(y)&&A.push(y)}for(B.push({val:"}"}),q=A.length-1;q>=0;q--){v=A[q],m=g[v],x=q>0?",":"",x+=JSON.stringify(v)+":",B.push({obj:m,prefix:x})}B.push({val:"{"})}}}}}return h},d.parse=function(r){for(var z,j,h,A,m,x,y,w,q,k=[],v=[],g=0;;){if(z=r[g++],"}"!==z&&"]"!==z&&"undefined"!=typeof z){switch(z){case" ":case"	":case"\n":case":":case",":break;case"n":g+=3,b(null,k,v);break;case"t":g+=3,b(!0,k,v);break;case"f":g+=4,b(!1,k,v);break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"-":for(j="",g--;;){if(h=r[g++],!/[\d\.\-e\+]/.test(h)){g--;break}j+=h}b(parseFloat(j),k,v);break;case'"':for(A="",m=void 0,x=0;;){if(y=r[g++],'"'===y&&("\\"!==m||x%2!==1)){break}A+=y,m=y,"\\"===m?x++:x=0}b(JSON.parse('"'+A+'"'),k,v);break;case"[":w={element:[],index:k.length},k.push(w.element),v.push(w);break;case"{":q={element:{},index:k.length},k.push(q.element),v.push(q);break;default:throw new Error("unexpectedly reached end of input: "+z)}}else{if(1===k.length){return k.pop()}b(k.pop(),k,v)}}}},{}]},{},[1]);